// NOTE: what is this?
import jdk.tools.jlink.resources.plugins
/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * To learn more about Gradle by exploring our Samples at https://docs.gradle.org/8.8/samples
 */

// NOTE: is theree a better more modern way to do this to pass plugins down to
// subprojects?
buildscript {
  // needed for applying plugins to subprojects
  repositories {
    mavenCentral()
    maven {
      url "https://plugins.gradle.org/m2/"
    }
  }
  dependencies {
    // classpath("org.openrewrite:rewrite-gradle-plugin:6.16.0")
    classpath "org.openrewrite:plugin:6.16.0"
  }
}

// https://discuss.gradle.org/t/multi-module-project-how-where-to-apply-plugins/46701/2

// passing all those to subprojects
subprojects {
  repositories {
    mavenCentral()
  //   // gradle plugins
  //   maven {
  //     url "https://plugins.gradle.org/m2/"
  //   }
  }

  // not working
  // https://plugins.gradle.org/plugin/org.openrewrite.rewrite
  // plugins {
  //   id 'project-report'
  //   id 'java'
  //   id 'maven-publish'
  //   id 'java-library'
  //   id 'jacoco'
  //   id 'groovy'
  //   id 'checkstyle'
  //   // id "com.vanniktech.maven.publish" version "0.28.0"
  //   // id 'com.diffplug.spotless' version '6.25.0'
  //   // id 'org.openrewrite.rewrite' version '6.16.0'
  //   // id "com.github.spotbugs" version "6.0.17"
  //   // id "name.remal.sonarlint" version "4.2.3"
  //   // id 'info.solidsoft.pitest' version '1.15.0'
  // }
  apply {
      plugin("java")
      plugin("maven-publish")
      plugin('java-library')
      plugin("project-report")
    	plugin('jacoco')
      plugin('war')
      plugin('idea')
      plugin('eclipse')
      plugin('checkstyle')
      plugin('groovy')

      plugin('org.openrewrite.rewrite')
  }

  dependencies {
    testRuntimeOnly("org.junit.jupiter:junit-jupiter-engine:5.10.2")
	  testImplementation("org.junit.jupiter:junit-jupiter-api:5.10.2")

    // tools
    rewrite("org.openrewrite.recipe:rewrite-static-analysis:1.9.0")

    rewrite("org.openrewrite.recipe:rewrite-java-security:2.9.0")
  }
}
